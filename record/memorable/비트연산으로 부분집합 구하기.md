# 비트연산으로 부분집합 구하기

### 준비물

```python
arr = ['Fish', 'And', 'Chips']
N = len(arr)

# arr에 대한 모든 경우의 수
for i in range(1 << N):
    # j: arr의 idx
    for j in range(N):
        if i & (1 << j):
            print(arr[j], end=' ')
    print()
```

### 실행결과

```python
# 공집합 포함 총 8가지


Fish 
And
Fish And
Chips
Fish Chips
And Chips
Fish And Chips
```

### `1 << 2` 의 의미

```python
N = 3 
print(1 << N) # 8
```

- `<<` 피연산자를 비트열에서 왼쪽으로 이동시킨다. 

| 2진수  | 10진수 | shift 횟수 |
| ---- | ---- | -------- |
| 0001 | 1    | 0        |
| 0010 | 2    | 1        |
| 0100 | 4    | 2        |
| 1000 | 8    | 3        |

- `for i in range(1 <<N)`
  
  - ` for i in range(8)`
  
  - 3개의 원소를 가지고 우리가 만들 수 있는 모든 경우의 수는  8 `(2**3)`

`arr = ['Fish', 'And', 'Chips']` 의 각 요소를 비트로 나타내보자. 

-     1번째, 2번째, 3번째 요소에 해당한다. 
  
  - arr의 index를 경우의 수에 따라 부분집합에 포함을 시킬 것이냐 시키지 않을 것이냐
  - `for i in range(1 <<N)` 연산문이 if문을 통과하기 위해서는 i값의 오른쪽부터 n번째 비트의 값이 1이어야 한다. 



- 예를들어 숫자 3(3번째 경우의 수)과 `1<<0`, `1<<1`, `1<<2` (step 3에서 확인한 배열 arr의 각 요소를 나타내는 비트 값)를 각각 비트 연산자 and로 비교하면 다음과 같은 표가 그려진다.
  
  `3 & (1 << 0)` → True
  
  | 3      | 0   | 1   | 1   |
  | ------ | --- | --- | --- |
  | fish   | 0   | 0   | 1   |
  | result | 0   | 0   | 1   |
  
  `3 & (1 << 1)` → True
  
  | 3      | 0   | 1   | 1   |
  | ------ | --- | --- | --- |
  | and    | 0   | 1   | 0   |
  | result | 0   | 1   | 0   |
  
  `3 & (1 << 2)` → False
  
  | 3      | 0   | 1   | 1   |
  | ------ | --- | --- | --- |
  | chips  | 1   | 0   | 0   |
  | result | 0   | 0   | 0   |

- `1<<0` 과 `1<<1` 에 대한 비교는 True를, `1<<2` 와의 비교는 False를 반환한다.

- 즉, 배열 `arr = ['Fish', 'And', 'Chips']` 의 부분집합 경우의 수 중,
  3번째 경우는 `Fish, And` 두 요소를 포함 한 것과 같다.





- 결과 확인을 위한 추가 `print문` 작성

```python
arr = ['Fish', 'And', 'Chips']
N = len(arr)

# arr에 대한 모든 경우의 수
for i in range(1 << N):
    # j: arr의 idx
    for j in range(N):
        if i & (1 << j):
            print(f'{i}번쨰 경우의 수 {bin(i)[2:]:0>4} {j}번 째 요소 == {arr[j]}')
            print(f'1을 {j}번 쉬프트 {bin(1<<j)[2:]:0>4}')
            print(arr[j])
    print()
    print()
```

```bash
1번째 경우의 수 0001 0번 째 요소 == Fish
1을 0번 쉬프트 0001
Fish

2번째 경우의 수 0010 1번 째 요소 == And
1을 1번 쉬프트 0010
And

3번째 경우의 수 0011 0번 째 요소 == Fish
1을 0번 쉬프트 0001
Fish
3번째 경우의 수 0011 1번 째 요소 == And
1을 1번 쉬프트 0010
And

4번째 경우의 수 0100 2번 째 요소 == Chips
1을 2번 쉬프트 0100
Chips

5번째 경우의 수 0101 0번 째 요소 == Fish
1을 0번 쉬프트 0001
Fish
5번째 경우의 수 0101 2번 째 요소 == Chips
1을 2번 쉬프트 0100
Chips

6번째 경우의 수 0110 1번 째 요소 == And
1을 1번 쉬프트 0010
And
6번째 경우의 수 0110 2번 째 요소 == Chips
1을 2번 쉬프트 0100
Chips

7번째 경우의 수 0111 0번 째 요소 == Fish
1을 0번 쉬프트 0001
Fish
7번째 경우의 수 0111 1번 째 요소 == And
1을 1번 쉬프트 0010
And
7번째 경우의 수 0111 2번 째 요소 == Chips
1을 2번 쉬프트 0100
Chips
```

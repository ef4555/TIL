# Form & Data
- 웹은 기본적으로 클라이언트-서버 아키텍처를 사용
  - 클라이언트(일반적으로 웹 브라우저)가 서버에 요청을 보내고, 서버는 클라이언트 요청에 응답
- 클라이언트 측에서 HTML form은 HTTP 요청을 서버에 보내는 가장 편리한 방법
- 이를 통해 사용자는 HTTP 요청에서 전달할 정보를 제공할 수 있음

## sending form data
- HTML <form> element : 데이터가 전송되는 방법을 정의
- 웹에서 사용자 정보를 입력하는 여러 방식(text, button, submit)등을 제공하고, 사용자로부터 할당된 데이터를 서버로 전송하는 역할 담당

- 데이터를 어디로(action) 어떤 방식(method)으로 보낼지
  - action
  - method

1. action
  - 입력 데이터가 전송될 url을 지정
  - 데이터를 어디로 보낼 것인지 지정하는 것이며 이 값은 반드시 유효한 url이어야 함
  - 만약 이 속성을 지정하지 않으면 데이터는 현재 form이 있는 페이지의 url로 보내짐

2. method
  - 데이터를 어떻게 보낼 것인지 정의
  - 입력 데이터의 HTTP request methods를 지정
  - HTML form 데이터는 오직 2가지 방법으로만 전송할 수 있는데
    - GET방식과 POST방식


### input
- type 속성에 따라 동작 방식이 달라진다
  - input 요소의 동작 방식은 type 특성에 따라 현격히 달라지므로 각각의 type은 별도로 MDN 문서에 참고하여 사용
  - name의 기본값은 text
- form을 통해 데이터를 제출(submit)했을 때 name 속성에 설정된 값을 서버로 전송하고, 서버는 name 속성에 설정된 값을 통해 사용자가 입력한 데이터 값에 접근 할 수 있음
- 서버에 전달하는 파라미터(name은 key, value는 value)로 매핑하는 것

### HTTP request methods
- HTTP 
  - HTTP 문서와 같은 리소스(데이터, 자원)들을 가져올 수 있도록 해주는 프로토콜(규칙, 규약)
  - 웹에서 이루어지는 모든 데이터 교환의 기초
  - HTTP는 주어진 리소스가 수행 할 원하는 작업을 나타내는 request methods를 정의

- 자원에 대한 수행하고자 하는 동작을 정의
- 주어진 리소스(자원)에 수행하길 원하는 행동을 나타냄
- HTTP Method 예시
  - GET, POST, PUT, DELETE

#### GET
- 서버로부터 정보를 조회하는 데 사용
  - 즉, 서버에게 리소스를 요청하기 위해 사용
- 데이터를 가져올때만 사용해야 함
- **데이터를 서버로 전송할 때 Query String Parameters를 통해 전송**
- 데이터는 URL에 포함되어 서버로 보내짐

#### Query String Parameters
- 사용자가 입력 데이터를 전달하는 방법중 하나로, url주소에 데이터를 파라미터를 통해 넘기는 것
- 이러한 문자열은 앰퍼센드(&)로 연결된 key=value쌍으로 구성되며 기본 url과 물음표로 구분됨
- http://127.0.0.1:8000/articles/throw/?key=value&key=value
- Query String
- 정해진 주소 이후에 물음표를 쓰는 것으로 Query String이 시작함을 알림
- key=value로 필요한 파라미터의 값을 적음
- =로 키와 벨류가 구분됨
- 파라미터가 여러 개 일 경우 &를 붙여 어려 개의 파라미터를 넘길 수 있음

#### 데이터를 가져오기
- throw 페이지의 form 이 보낸 데이터는 url에 포함되어 서버로 보내진다.
- 모든 요청 데이터는 view함수의 첫번째 인자인 request에 담겨있다

## django model
- model의 핵심 개념과 ORM을 통한 데이터베이스 조작 이해
- django는 웹 애플리케이션의 데이터를 구조화하고 조작하기 위한 추상적인 계층 모델 제공

### database
- 체계화된 데이터의 모임
- 검색 및 구조화 같은 작업을 보다 쉽게 하기 위해 조직화된 데이터를 수집하는 저장 시스템
- database의 가장 기초적인 키워드에 대해 알아보고 자세한 내용은 추후 데이터베이스 시간에 다룰 예정

1. 필드
  - 속성, 컬럼
  - 각 필드에는 고유한 데이터 형식이 지정됨 : INT, TEXT등
2. 레코드
  - 튜플, 행
  - 테이블의 데이터는 레코드에 저장됨
  
3. PK
  - 기본 키
  - 각 레코드의 고유한 값(식별자로 사용)
  - 기술적으로 다른 항목과 절대로 중복될 수 없는 단일 값
  - 데이터베이스 관리 및 테이블 간 관계 설정 시 주요하게 활용 됨


#### 스키마(Schema)
- 뼈대
- 데이터베이스에서 자료의 구조, 표현방법, 관계 등을 정의한 구조

#### 테이블(table)
- 필드와 레코드를 상요해 조직된 데이터 요소들의 집합
- 관계라고도 부름

#### 쿼리(Query)
- 데이터를 조회하기 위한 명렬어
- 조건에 맞는 데이터 추출하거나 조작

## Model
- 장고는 모델을 통해 데이터에 접근하고 조작
- 사용하는 데이터들의 필수적인 필드들과 동작들을 포함
- 저장된 데이터베이스의 구조
- 일반적으로 각각의 모델은 하나의 데이터베이스 테이블에 매핑
  - 모델 클래스 1개 == 데이터베이스 테이블 1개

- 장고는 모델 필드를 통해 테이블의 필드에 저장할 데이터 유형을 지정
- 작성한 models.py는 데이터 베이스 스키마를 정의
- 이러한 모델의 변경사항을 실제 데이터베이스에 반영하기 위한 과정이 필요

### migrations
- 장고가 모델에 생긴 변화(필드 추가, 수정 등)를 실제 DB에 반영하는 방법
1. makemigrations : 모델의 변경사항에 대한 새로운 migration을 만들 때 사용
  - 파이썬으로 작성한 설계도 
2. migrate : 반영할 때 사용
  - makemigrations로 만든 설꼐도를 실제 데이터베이스에 반영
  - 결과적으로 모델의 변경사항과 데이터베이스를 동기화
  - 설계도를 실제 db.sqlite3 DB 파일에 반영

### 반드시 기억해야 할 migration 3단계
1. models.py에서 변경사항이 발생하면
2. migration 생성 : makemigrations
3. DB 반영 : migrate

#### 참고
1. showmigrations
  - migrations 파일들이 migrate 됐는지 안됐는지 여부를 확인하는 용도
  - [X] 표시가 있으면 migrate가 완료되었음을 의미

2. sqlmigrate
  - 해당 migrations 파일이 SQL문으로 어떻게 해석 될 지 미리 확인할 수 있음

## ORM
- makemigrations로 인해 만들어진 설계도는 파이썬으로 작성되어 있음
- SQL만 알아들을 수 있는 DB가 어떻게 이 설계도를 이해할까?
- 이 과정의 번역을 담당하는 것이 ORM
- Object-Relational-Mapping
- 객체 지향 프로그래밍 언어를 사용하여 호환되지 않는 유형의 시스템 간에(django - DB)데이터를 변환하는 프로그래밍 기술
- 객체 지향 프로그래밍에서 데이터베이스를 연동할 때, 데이터베이스와 객체 지향 프로그래밍 언어 간의 호환되지 않는 데이터를 변환하는 프로그래밍 기법
- django는 내장 django ORM 을 사용
- SQL을 사용하지 않고 데이터베이스를 조작할 수 있게 해주는 매개체

- 장점 : SQL을 잘 알지 못해도 객체지향 언어로 DB 조작 가능, 객체 지향적 접근으로 인한 높은 생산성
- 단점 : ORM만으로 세밀한 데이터베이스 조작을 구현하기 어려운 경우가 있음

### Queryset API
- Queryset API: QuerySet과 상호작용하기 위해 사용하는 도구

- 데이터베이스에 특정한 데이터를 보여 달라는 요청
  - 쿼리문을 작성한다
  - 원하는 데이터를 얻기 위해 데이터베이스에 요청을 보낼 코드를 작성한다

- 이 때, 파이썬으로 작성한 코드가 ORM에 의해 SQL로 변환되어 데이터베이스에 전달되며, 데이터베이스의 응답 데이터를 ORM이 QureySet 이라는 자료 형태로 변환하여 우리에게 전달

- **QuerySet**
- 데이터베이스에게서 전달 받은 객체 목록(데이터 모음)
  - 순회가 가능한 데이터로써 1개 이상의 데이터를 불러와 사용할 수 있음
- django ORM을 통해 만들어진 자료형이며 필터를 걸거나 정렬 등을 수행할 수 있음
- object manager를 사용하여 복수의 데이터를 가져오는 queryset method를 사용할 때 반환되는 객체
- 단 데이터베이스가 단일한 객체를 반환 할 때는 QuerySet이 아닌 모델(class)의 인스턴스로 반환됨

### CREAT
- 데이터 객체를 만드는 방법
1. 첫 번째 방법
  1. article = Article()
    - 클래스를 통한 인스턴스 생성
  2. article.title
    - 클래스 변수명과 같은 이름읭 인스턴스 변수를 생성 후 할당
  3. article.save()
    - 인스턴스로 save 메서드 호출
2. 두 번째 방법
3. 세 번째 방법

### READ
- QuerySet API method를 사용해 데이터를 다양하게 조회하기
- QuerySet API method는 크게 2가지로 분류됨
  1. Methods that "return new querysets'
  2. Methods that "do not return querysets'

1. all()
  - QuerySet return
  - 전체 데이터 조회

2. get()
  - 단일 데이터 조회
  - 객체를 찾을 수 없으면 DoesNotExist 예외를 발생시키고, 둘 이상의 객체를 찾으면 MultipleREturned 예외를 발생시킴
  - 위와 같은 특징으로 인해 PK와 같이 고유성을 보장하는 조회에서만 사용

3. filter
  - 지정된 조회 매개 변수와 일치하는 객체를 포함하는 새 QuerySet을 반환
  - 조회된 객체가 없거나 1개여도 QuerySet을 반환

4. Field lookups
  - 특정 레코드에 대한 조건을 설정하는 방법
  - QuerySet 메서드 filter(), exclude() 및 get()에 대한 키워드 인자로 지정됨
  - 다양한 bulit-in-lookups는 공식 문서를 참고


### UPDATE
- 수정하고자 하는 article 인스턴스 객체를 조회 후 반환값을 저장
- article 인스턴스 객체의 인스턴스 변수 값을 새로운 값으로 할당
- save() 인스턴스 메서드 호출


### DELETE 
- 삭제하고자 하는 article 인스턴스 객체를 조회 후 반환 값을 저장
- delete() 인스턴스 메서드 호출